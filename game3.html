<!-- 
    Halloween Pumpkin Catcher Game for Bitrix
    =========================================
    
    –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –£–°–¢–ê–ù–û–í–ö–ï:
    1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å –∫–æ–¥ –∏–∑ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞
    2. –í –∞–¥–º–∏–Ω–∫–µ –ë–∏—Ç—Ä–∏–∫—Å –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ö–æ–Ω—Ç–µ–Ω—Ç" -> "–°–∞–π—Ç—ã" -> "–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∞–π—Ç–∞"
    3. –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ –Ω–∞–∂–º–∏—Ç–µ "–ò–∑–º–µ–Ω–∏—Ç—å"
    4. –î–æ–±–∞–≤—å—Ç–µ –±–ª–æ–∫ "–ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π HTML-–∫–æ–¥"
    5. –í—Å—Ç–∞–≤—å—Ç–µ –≤–µ—Å—å –∫–æ–¥ –≤ –±–ª–æ–∫
    6. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
    
    –û–°–û–ë–ï–ù–ù–û–°–¢–ò:
    - –ò–≥—Ä–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω–∞ (–æ–¥–∏–Ω HTML —Ñ–∞–π–ª)
    - –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
    - –ó–∞—â–∏—Ç–∞ –æ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å CSS –ë–∏—Ç—Ä–∏–∫—Å
    - –ù–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
    
    –£–ü–†–ê–í–õ–ï–ù–ò–ï:
    - –°—Ç—Ä–µ–ª–∫–∏ –≤–ª–µ–≤–æ/–≤–ø—Ä–∞–≤–æ –∏–ª–∏ –∫–ª–∞–≤–∏—à–∏ A/D
    - –õ–æ–≤–∏—Ç–µ —Ç—ã–∫–≤—ã (üéÉ) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—á–∫–æ–≤
    - –ò–∑–±–µ–≥–∞–π—Ç–µ –ø—Ä–∏–∑—Ä–∞–∫–æ–≤ (üëª) - –æ–Ω–∏ –æ—Ç–Ω–∏–º–∞—é—Ç –∂–∏–∑–Ω–∏
-->
    <style>
        /* –°–±—Ä–æ—Å —Å—Ç–∏–ª–µ–π –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –æ—Ç –ë–∏—Ç—Ä–∏–∫—Å */
        .halloween-game-wrapper * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* –ó–∞—â–∏—Ç–∞ –æ—Ç –≤–ª–∏—è–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö —Å—Ç–∏–ª–µ–π */
        .halloween-game-wrapper {
            all: initial;
            font-family: Arial, sans-serif !important;
        }

        .halloween-game-wrapper {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            color: #fff;
            overflow: hidden;
            width: 100vw;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 0;
            margin: 0;
        }

        .game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(180deg, #0a0a0a 0%, #1a1a1a 100%);
            border: none;
            border-radius: 0;
            overflow: hidden;
            box-shadow: none;
            /* –ò–∑–æ–ª—è—Ü–∏—è —Å—Ç–∏–ª–µ–π –¥–ª—è –ë–∏—Ç—Ä–∏–∫—Å */
            isolation: isolate;
            z-index: 1;
        }

        .game-header {
            background: linear-gradient(90deg, #ff6b35, #f7931e);
            padding: 15px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }

        .game-area {
            position: relative;
            width: 100%;
            height: calc(100vh - 60px);
            background: radial-gradient(circle at center, #2a2a2a 0%, #0a0a0a 100%);
            overflow: hidden;
        }

        .player {
            position: absolute;
            width: 4vw;
            height: 4vw;
            min-width: 50px;
            min-height: 50px;
            max-width: 80px;
            max-height: 80px;
            bottom: 2vh;
            left: 0;
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            border-radius: 50%;
            border: 3px solid #fff;
            box-shadow: 0 0 20px rgba(255, 107, 53, 0.8);
            transition: left 0.05s ease-out;
        }

        .player::before {
            content: 'üéÉ';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 30px;
        }

        .pumpkin {
            position: absolute;
            width: 3vw;
            height: 3vw;
            min-width: 30px;
            min-height: 30px;
            max-width: 50px;
            max-height: 50px;
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            border-radius: 50%;
            border: 2px solid #fff;
            box-shadow: 0 0 15px rgba(255, 107, 53, 0.6);
            animation: fall linear;
        }

        .pumpkin::before {
            content: 'üéÉ';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 20px;
        }

        .ghost {
            position: absolute;
            width: 2.5vw;
            height: 2.5vw;
            min-width: 25px;
            min-height: 25px;
            max-width: 45px;
            max-height: 45px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            animation: fall linear, float 2s ease-in-out infinite;
        }

        .ghost::before {
            content: 'üëª';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 18px;
        }

        .bonus {
            position: absolute;
            width: 2.5vw;
            height: 2.5vw;
            min-width: 25px;
            min-height: 25px;
            max-width: 40px;
            max-height: 40px;
            background: linear-gradient(45deg, #00ff00, #00cc00);
            border-radius: 50%;
            border: 2px solid #fff;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.6);
            animation: fall-slow linear, pulse 1s ease-in-out infinite;
        }

        .bonus::before {
            content: '‚≠ê';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 16px;
        }

        .debuff {
            position: absolute;
            width: 2.5vw;
            height: 2.5vw;
            min-width: 25px;
            min-height: 25px;
            max-width: 40px;
            max-height: 40px;
            background: linear-gradient(45deg, #ff0000, #cc0000);
            border-radius: 50%;
            border: 2px solid #fff;
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.6);
            animation: fall-slow linear, shake 0.5s ease-in-out infinite;
        }

        .debuff::before {
            content: 'üíÄ';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 16px;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }

        @keyframes shake {
            0%, 100% {
                transform: translateX(0);
            }
            25% {
                transform: translateX(-2px);
            }
            75% {
                transform: translateX(2px);
            }
        }

        @keyframes fall {
            from {
                top: -50px;
            }
            to {
                top: 100%;
            }
        }
        
        @keyframes fall-slow {
            from {
                top: -50px;
            }
            to {
                top: 100%;
            }
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        .score {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 20px;
            font-weight: bold;
            color: #ff6b35;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }

        .lives {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 20px;
            font-weight: bold;
            color: #ff6b35;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }

        .level-info {
            position: absolute;
            top: 60px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 10px;
            border-radius: 10px;
            border: 2px solid #ff6b35;
            min-width: 150px;
        }

        .level-text {
            color: #ff6b35;
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 8px;
            text-align: center;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 5px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b35, #f7931e);
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            color: #fff;
            font-size: 12px;
            text-align: center;
        }

        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            background: rgba(0, 0, 0, 0.9);
            padding: 30px;
            border-radius: 15px;
            border: 3px solid #ff6b35;
            display: none;
        }

        .victory-screen {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            background: rgba(0, 0, 0, 0.9);
            padding: 30px;
            border-radius: 15px;
            border: 3px solid #00ff00;
            display: none;
            z-index: 1000;
        }

        .victory-screen h2 {
            color: #00ff00;
            font-size: 32px;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }

        .victory-screen p {
            color: #fff;
            font-size: 18px;
            margin-bottom: 15px;
        }

        .game-over h2 {
            color: #ff6b35;
            font-size: 32px;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }

        .restart-btn {
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 25px;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.4);
        }

        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 53, 0.6);
        }

        .start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            overflow-y: auto;
            padding: 20px;
            box-sizing: border-box;
            z-index: 10;
        }

        .start-screen h1 {
            color: #ff6b35;
            font-size: 36px;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }

        .start-screen p {
            color: #fff;
            font-size: 18px;
            margin-bottom: 30px;
            max-width: 400px;
        }

        .start-btn {
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            color: white;
            border: none;
            padding: 30px 60px;
            font-size: 32px;
            font-weight: bold;
            border-radius: 40px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(255, 107, 53, 0.8);
            margin-top: 40px;
            min-width: 250px;
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
            z-index: 100;
        }

        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 107, 53, 0.6);
        }

        .rules-block {
            background: rgba(0, 0, 0, 0.8);
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #ff6b35;
            margin: 20px 0;
            max-width: 500px;
            text-align: left;
        }

        .rules-block h2 {
            color: #ff6b35;
            font-size: 24px;
            margin-bottom: 15px;
            text-align: center;
        }

        .rules-block h3 {
            color: #f7931e;
            font-size: 18px;
            margin: 15px 0 10px 0;
            text-align: center;
        }

        .rules-block ul {
            list-style: none;
            padding: 0;
        }

        .rules-block li {
            margin: 10px 0;
            font-size: 16px;
            padding: 8px;
            background: rgba(255, 107, 53, 0.1);
            border-radius: 8px;
            border-left: 4px solid #ff6b35;
        }

        .rules-block p {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            color: #f7931e;
            margin-top: 10px;
        }

        .controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #fff;
            font-size: 14px;
            text-align: center;
            opacity: 0.7;
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: rgba(255, 0, 0, 0.8);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            z-index: 10000;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .close-btn:hover {
            background: rgba(255, 0, 0, 1);
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(255, 0, 0, 0.6);
        }

        .pause-btn {
            position: absolute;
            top: 20px;
            right: 70px;
            width: 40px;
            height: 40px;
            background: rgba(255, 165, 0, 0.8);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            z-index: 10000;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .pause-btn:hover {
            background: rgba(255, 165, 0, 1);
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(255, 165, 0, 0.6);
        }

        .pause-screen {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            background: rgba(0, 0, 0, 0.9);
            padding: 30px;
            border-radius: 15px;
            border: 3px solid #ffa500;
            display: none;
            z-index: 1000;
        }

        .pause-screen h2 {
            color: #ffa500;
            font-size: 32px;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }

        .pause-screen p {
            color: #fff;
            font-size: 18px;
            margin-bottom: 20px;
        }

        .pause-screen .restart-btn {
            margin: 5px;
        }

        /* –°–∫—Ä–∏–º–µ—Ä—ã */
        .screamer-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 10000;
            display: none;
        }

        .screamer-image {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-width: 80vw;
            max-height: 80vh;
            z-index: 10001;
        }

        .player-screamer {
            transform: scale(10) !important;
            transition: transform 0.1s ease;
        }

        @media (max-width: 768px) {
            .game-container {
                width: 100vw;
                height: 100vh;
            }
            
            .game-area {
                height: calc(100vh - 50px);
            }
            
            .game-header {
                font-size: 18px;
                padding: 8px;
            }
            
            .start-btn {
                padding: 25px 40px;
                font-size: 28px;
                min-width: 220px;
            }
            
            .rules-block {
                padding: 15px;
                margin: 15px 0;
                max-width: 90vw;
            }
            
            .rules-block h2 {
                font-size: 20px;
            }
            
            .rules-block li {
                font-size: 14px;
                padding: 6px;
            }
            
            .start-screen h1 {
                font-size: 28px;
            }
        }
    </style>
</head>
<div class="halloween-game-wrapper">
    <div class="game-container">
        <div class="game-header">
            üéÉ Halloween Pumpkin Catcher üëª
        </div>
        
        <div class="start-screen" id="startScreen">
            <h1>üéÉ Halloween Pumpkin Catcher üëª</h1>
            <div class="rules-block">
                <h2>üéÆ –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã:</h2>
                <ul>
                    <li>üéÉ –õ–æ–≤–∏—Ç–µ –ø–∞–¥–∞—é—â–∏–µ —Ç—ã–∫–≤—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—á–∫–æ–≤ (+10) –∏ —Ä–∞–∑–≤–∏—Ç–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</li>
                    <li>üëª –ò–∑–±–µ–≥–∞–π—Ç–µ –ø—Ä–∏–∑—Ä–∞–∫–æ–≤ - –æ–Ω–∏ –æ—Ç–Ω–∏–º–∞—é—Ç –∂–∏–∑–Ω—å</li>
                    <li>‚≠ê –õ–æ–≤–∏—Ç–µ –∑–≤–µ–∑–¥—ã-–±–æ–Ω—É—Å—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—á–∫–æ–≤ (+20)</li>
                    <li>üíÄ –ò–∑–±–µ–≥–∞–π—Ç–µ —á–µ—Ä–µ–ø–æ–≤-–¥–µ–±–∞—Ñ–æ–≤ - –æ–Ω–∏ –æ—Ç–Ω–∏–º–∞—é—Ç –æ—á–∫–∏ (-15)</li>
                    <li>üíÄ –£ –≤–∞—Å –µ—Å—Ç—å 3 –∂–∏–∑–Ω–∏</li>
                    <li>üìà –°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π: –∫–∞–∂–¥—ã–µ 5 —Ç—ã–∫–≤ –ø–µ—Ä—Å–æ–Ω–∞–∂ —Ä–∞—Å—Ç–µ—Ç –Ω–∞ 5% –∏ —É—Å–∫–æ—Ä—è–µ—Ç—Å—è –Ω–∞ 5%</li>
                    <li>‚ö° –ò–≥—Ä–∞ —É—Å–∫–æ—Ä—è–µ—Ç—Å—è —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º</li>
                    <li>üëë –¶–µ–ª—å: –Ω–∞–±—Ä–∞—Ç—å 666 –æ—á–∫–æ–≤ –¥–ª—è –ø–æ–±–µ–¥—ã!</li>
                </ul>
                <h3>üéØ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</h3>
                <p>–°—Ç—Ä–µ–ª–∫–∏ ‚Üê ‚Üí –∏–ª–∏ –∫–ª–∞–≤–∏—à–∏ A D</p>
            </div>
            <button class="start-btn" onclick="startGame()">üéÆ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
        </div>
        
        <div class="game-area" id="gameArea">
            <div class="score" id="score">–°—á–µ—Ç: 0</div>
            <div class="lives" id="lives">–ñ–∏–∑–Ω–∏: 3</div>
            <div class="level-info" id="levelInfo">
                <div class="level-text">–£—Ä–æ–≤–µ–Ω—å: <span id="playerLevel">1</span></div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">0/5</div>
            </div>
            <div class="player" id="player"></div>
        </div>
        
        <div class="game-over" id="gameOver">
            <h2>–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!</h2>
            <p>–í–∞—à —Å—á–µ—Ç: <span id="finalScore">0</span></p>
            <button class="restart-btn" onclick="restartGame()">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
        </div>
        
        <div class="victory-screen" id="victoryScreen">
            <h2>üéâ –í—ã –ø–æ–±–µ–¥–∏–ª–∏! üéâ</h2>
            <p>–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –Ω–∞–±—Ä–∞–ª–∏ 666 –æ—á–∫–æ–≤!</p>
            <p>–í–æ–ø—Ä–æ—Å: –∫–ø–∫—É–∫—É–∫–ø–∫–ø—É–∫</p>
            <button class="restart-btn" onclick="restartGame()">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
        </div>
        
        <div class="pause-screen" id="pauseScreen">
            <h2>‚è∏Ô∏è –ü–∞—É–∑–∞</h2>
            <p>–ò–≥—Ä–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞</p>
            <button class="restart-btn" onclick="togglePause()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
            <button class="restart-btn" onclick="restartGame()">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
        </div>
        
        <div class="controls">
            –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ‚Üê ‚Üí –∏–ª–∏ A D –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è
        </div>
        
        <button class="close-btn" onclick="closeGame()" title="–ó–∞–∫—Ä—ã—Ç—å –∏–≥—Ä—É">‚úï</button>
        <button class="pause-btn" onclick="togglePause()" title="–ü–∞—É–∑–∞/–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å">‚è∏Ô∏è</button>
    </div>
    
    <!-- –°–∫—Ä–∏–º–µ—Ä—ã -->
    <div class="screamer-overlay" id="screamerOverlay">
        <img class="screamer-image" id="screamerImage" src="https://cm.author.today/content/2020/08/25/5aeeecb854e14ed4b31f5ba77920ba99.jpg" alt="Screamer" style="display: none;">
    </div>

    <script>
        class HalloweenGame {
            constructor() {
                this.gameArea = document.getElementById('gameArea');
                this.player = document.getElementById('player');
                this.scoreElement = document.getElementById('score');
                this.livesElement = document.getElementById('lives');
                this.gameOverScreen = document.getElementById('gameOver');
                this.startScreen = document.getElementById('startScreen');
                this.finalScoreElement = document.getElementById('finalScore');
                this.victoryScreen = document.getElementById('victoryScreen');
                this.screamerOverlay = document.getElementById('screamerOverlay');
                this.screamerImage = document.getElementById('screamerImage');
                this.playerLevelElement = document.getElementById('playerLevel');
                this.progressFill = document.getElementById('progressFill');
                this.progressText = document.getElementById('progressText');
                this.pauseScreen = document.getElementById('pauseScreen');
                
                this.score = 0;
                this.lives = 3;
                this.gameRunning = false;
                this.playerX = 0;
                this.gameSpeed = 2000;
                this.spawnInterval = null;
                this.gameLoopRunning = false;
                this.screamerCount = 0;
                this.maxScreamers = 7;
                this.screamerTriggered = false;
                this.lastScreamerTime = 0;
                this.screamerCooldown = 10000; // 10 —Å–µ–∫—É–Ω–¥ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
                
                // –°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π
                this.playerLevel = 1;
                this.pumpkinsCaught = 0;
                this.pumpkinsForNextLevel = 5;
                this.playerSize = 1.0;
                this.speedMultiplier = 1.0;
                this.activePumpkins = 0;
                this.isPaused = false;
                this.lastPumpkinTime = 0;
                
                this.setupEventListeners();
            }
            
            setupEventListeners() {
                this.keys = {};
                this.moveSpeed = 0;
                this.maxSpeed = 10; // –£–≤–µ–ª–∏—á–µ–Ω–æ —Å 8 –¥–æ 10 (25% —É–≤–µ–ª–∏—á–µ–Ω–∏–µ)
                this.acceleration = 0.625; // –£–≤–µ–ª–∏—á–µ–Ω–æ —Å 0.5 –¥–æ 0.625 (25% —É–≤–µ–ª–∏—á–µ–Ω–∏–µ)
                this.friction = 0.8;
                
                document.addEventListener('keydown', (e) => {
                    if (!this.gameRunning) return;
                    
                    e.preventDefault();
                    
                    if (e.key === 'Escape') {
                        this.togglePause();
                        return;
                    }
                    
                    if (this.isPaused) return; // –ù–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è –ø–∞—É–∑—ã
                    
                    if (e.key === 'ArrowLeft' || e.key === 'a' || e.key === 'A') {
                        this.keys.left = true;
                    } else if (e.key === 'ArrowRight' || e.key === 'd' || e.key === 'D') {
                        this.keys.right = true;
                    }
                });
                
                document.addEventListener('keyup', (e) => {
                    if (!this.gameRunning) return;
                    
                    e.preventDefault();
                    
                    if (e.key === 'ArrowLeft' || e.key === 'a' || e.key === 'A') {
                        this.keys.left = false;
                    } else if (e.key === 'ArrowRight' || e.key === 'd' || e.key === 'D') {
                        this.keys.right = false;
                    }
                });
            }
            
            gameLoop() {
                if (!this.gameRunning || this.gameLoopRunning) return;
                
                this.gameLoopRunning = true;
                const loop = () => {
                    if (!this.gameRunning) {
                        this.gameLoopRunning = false;
                        return;
                    }
                    
                    if (!this.isPaused) {
                        this.updateMovement();
                    }
                    requestAnimationFrame(loop);
                };
                loop();
            }
            
            updateMovement() {
                const gameAreaWidth = this.gameArea.offsetWidth;
                const playerWidth = this.player.offsetWidth;
                const maxX = gameAreaWidth - playerWidth;
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π
                if (this.keys.left) {
                    this.moveSpeed = Math.max(-this.maxSpeed, this.moveSpeed - this.acceleration);
                } else if (this.keys.right) {
                    this.moveSpeed = Math.min(this.maxSpeed, this.moveSpeed + this.acceleration);
                } else {
                    // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç—Ä–µ–Ω–∏–µ –∫–æ–≥–¥–∞ –∫–ª–∞–≤–∏—à–∏ –Ω–µ –Ω–∞–∂–∞—Ç—ã
                    this.moveSpeed *= this.friction;
                    if (Math.abs(this.moveSpeed) < 0.1) {
                        this.moveSpeed = 0;
                    }
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏–µ
                if (Math.abs(this.moveSpeed) > 0.01) {
                    this.playerX += this.moveSpeed;
                    this.playerX = Math.max(0, Math.min(maxX, this.playerX));
                    this.updatePlayerPosition();
                }
                
                // –°–ª—É—á–∞–π–Ω—ã–µ —Å–∫—Ä–∏–º–µ—Ä—ã (1% —à–∞–Ω—Å –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä, –Ω–æ –Ω–µ —á–∞—â–µ —á–µ–º –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥)
                const currentTime = Date.now();
                if (Math.random() < 0.01 && 
                    currentTime - this.lastScreamerTime >= this.screamerCooldown) {
                    this.triggerScreamer();
                }
                
                // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç—ã–∫–≤ - –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç –±–æ–ª—å—à–µ 5 —Å–µ–∫—É–Ω–¥, –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–µ–º
                if (this.activePumpkins === 0 && this.gameRunning && !this.isPaused) {
                    if (!this.lastPumpkinTime) this.lastPumpkinTime = Date.now();
                    if (Date.now() - this.lastPumpkinTime > 5000) {
                        this.forceSpawnPumpkin();
                        this.lastPumpkinTime = Date.now();
                    }
                } else if (this.activePumpkins > 0) {
                    this.lastPumpkinTime = Date.now();
                }
            }
            
            startGame() {
                this.startScreen.style.display = 'none';
                this.gameOverScreen.style.display = 'none';
                this.victoryScreen.style.display = 'none';
                this.pauseScreen.style.display = 'none';
                this.gameRunning = true;
                this.score = 0;
                this.lives = 3;
                this.screamerCount = 0;
                this.lastScreamerTime = 0;
                this.playerLevel = 1;
                this.pumpkinsCaught = 0;
                this.playerSize = 1.0;
                this.speedMultiplier = 1.0;
                this.activePumpkins = 0;
                this.isPaused = false;
                this.lastPumpkinTime = 0;
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–∏ –∏–≥—Ä–æ–∫–∞ –ø–æ —Ü–µ–Ω—Ç—Ä—É
                const gameAreaWidth = this.gameArea.offsetWidth;
                const playerWidth = this.player.offsetWidth;
                this.playerX = (gameAreaWidth - playerWidth) / 2;
                this.moveSpeed = 0;
                
                this.updateScore();
                this.updateLives();
                this.updateLevelDisplay();
                this.updatePlayerSize();
                this.updatePlayerSpeed();
                this.updatePlayerPosition();
                this.startSpawning();
                
                // –ó–∞–ø—É—Å–∫ –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞
                this.gameLoop();
            }
            
            startSpawning() {
                this.spawnInterval = setInterval(() => {
                    this.spawnObject();
                }, this.gameSpeed);
                
                // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π —Å–ø–∞–≤–Ω —Ç—ã–∫–≤, –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
                this.pumpkinCheckInterval = setInterval(() => {
                    if (this.activePumpkins === 0 && this.gameRunning && !this.isPaused) {
                        this.forceSpawnPumpkin();
                    }
                }, 2000); // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
                
                // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º
                setTimeout(() => {
                    if (this.gameSpeed > 800) {
                        this.gameSpeed -= 100;
                        clearInterval(this.spawnInterval);
                        this.startSpawning();
                    }
                }, 10000);
            }
            
            forceSpawnPumpkin() {
                if (!this.gameRunning || this.activePumpkins > 0 || this.isPaused) return;
                
                const object = document.createElement('div');
                object.className = 'pumpkin';
                
                const gameAreaWidth = this.gameArea.offsetWidth;
                const objectWidth = 40;
                const randomX = Math.random() * (gameAreaWidth - objectWidth);
                
                object.style.left = randomX + 'px';
                object.style.top = '-50px'; // –ù–∞—á–∏–Ω–∞–µ–º —Å–≤–µ—Ä—Ö—É —ç–∫—Ä–∞–Ω–∞
                object.style.animationDuration = (Math.random() * 2.88 + 2.88) + 's';
                
                this.gameArea.appendChild(object);
                this.activePumpkins++;
                
                this.setupObjectCollision(object, 'pumpkin');
            }
            
            spawnObject() {
                if (!this.gameRunning || this.isPaused) return;
                
                const object = document.createElement('div');
                const random = Math.random();
                let objectType = 'pumpkin';
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –æ–±—ä–µ–∫—Ç–∞
                if (random < 0.25) { // 25% —à–∞–Ω—Å –ø—Ä–∏–∑—Ä–∞–∫–∞
                    objectType = 'ghost';
                } else if (random < 0.35) { // 10% —à–∞–Ω—Å –±–æ–Ω—É—Å–∞
                    objectType = 'bonus';
                } else if (random < 0.45) { // 10% —à–∞–Ω—Å –¥–µ–±–∞—Ñ–∞
                    objectType = 'debuff';
                } else { // 55% —à–∞–Ω—Å —Ç—ã–∫–≤—ã
                    objectType = 'pumpkin';
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–Ω–æ –ª–∏ —Å–ø–∞–≤–Ω–∏—Ç—å —Ç—ã–∫–≤—É (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—ã–∫–≤)
                if (objectType === 'pumpkin' && this.activePumpkins > 0) {
                    return; // –ù–µ —Å–ø–∞–≤–Ω–∏–º —Ç—ã–∫–≤—É, –µ—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∞—è
                }
                
                object.className = objectType;
                
                const gameAreaWidth = this.gameArea.offsetWidth;
                const objectWidth = 40;
                const randomX = Math.random() * (gameAreaWidth - objectWidth);
                
                object.style.left = randomX + 'px';
                object.style.top = '-50px'; // –ù–∞—á–∏–Ω–∞–µ–º —Å–≤–µ—Ä—Ö—É —ç–∫—Ä–∞–Ω–∞
                
                // –ó–∞–º–µ–¥–ª—è–µ–º –ø–∞–¥–µ–Ω–∏–µ –Ω–∞ 40% (—É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –≤—Ä–µ–º—è –∞–Ω–∏–º–∞—Ü–∏–∏)
                if (objectType === 'bonus' || objectType === 'debuff') {
                    object.style.animationDuration = (Math.random() * 3 + 4) + 's'; // 4-7 —Å–µ–∫—É–Ω–¥
                } else if (objectType === 'pumpkin') {
                    object.style.animationDuration = (Math.random() * 2.88 + 2.88) + 's'; // 2.88-5.76 —Å–µ–∫—É–Ω–¥ (–∑–∞–º–µ–¥–ª–µ–Ω–∏–µ –Ω–∞ 20% –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ)
                } else {
                    object.style.animationDuration = (Math.random() * 2.4 + 2.4) + 's'; // 2.4-4.8 —Å–µ–∫—É–Ω–¥ (–∑–∞–º–µ–¥–ª–µ–Ω–∏–µ –Ω–∞ 40%)
                }
                
                this.gameArea.appendChild(object);
                
                // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—ã–∫–≤
                if (objectType === 'pumpkin') {
                    this.activePumpkins++;
                }
                
                this.setupObjectCollision(object, objectType);
            }
            
            setupObjectCollision(object, objectType) {
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è
                const checkCollision = () => {
                    if (!this.gameRunning) return;
                    
                    const playerRect = this.player.getBoundingClientRect();
                    const objectRect = object.getBoundingClientRect();
                    
                    if (this.isColliding(playerRect, objectRect)) {
                        if (objectType === 'ghost') {
                            this.loseLife();
                        } else if (objectType === 'pumpkin') {
                            this.addScore(10, true); // true –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ —Ç—ã–∫–≤–∞
                            this.activePumpkins--; // –£–º–µ–Ω—å—à–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—ã–∫–≤
                        } else if (objectType === 'bonus') {
                            console.log('–ë–æ–Ω—É—Å –ø–æ–π–º–∞–Ω - –¥–æ–±–∞–≤–ª—è–µ–º 20 –æ—á–∫–æ–≤');
                            this.addScore(20);
                        } else if (objectType === 'debuff') {
                            console.log('–î–µ–±–∞—Ñ –ø–æ–π–º–∞–Ω - –æ—Ç–Ω–∏–º–∞–µ–º 15 –æ—á–∫–æ–≤');
                            this.addScore(-15);
                        }
                        object.remove();
                        return;
                    }
                    
                    if (objectRect.top > this.gameArea.offsetHeight) {
                        if (objectType === 'pumpkin') {
                            this.loseLife();
                            this.activePumpkins--; // –£–º–µ–Ω—å—à–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—ã–∫–≤
                        } else if (objectType === 'bonus') {
                            // –ë–æ–Ω—É—Å —É–ø–∞–ª - –ù–ï –î–ê–ï–ú –û–ß–ö–ò, –ø—Ä–æ—Å—Ç–æ —É–¥–∞–ª—è–µ–º
                            console.log('–ë–æ–Ω—É—Å —É–ø–∞–ª - –æ—á–∫–∏ –ù–ï –¥–æ–±–∞–≤–ª–µ–Ω—ã');
                        } else if (objectType === 'debuff') {
                            // –î–µ–±–∞—Ñ —É–ø–∞–ª - –ù–ï –î–ê–ï–ú –û–ß–ö–ò, –ø—Ä–æ—Å—Ç–æ —É–¥–∞–ª—è–µ–º
                            console.log('–î–µ–±–∞—Ñ —É–ø–∞–ª - –æ—á–∫–∏ –ù–ï –¥–æ–±–∞–≤–ª–µ–Ω—ã');
                        }
                        // –ü—Ä–∏–∑—Ä–∞–∫–∏ —Ç–æ–∂–µ –ø—Ä–æ—Å—Ç–æ –∏—Å—á–µ–∑–∞—é—Ç
                        object.remove();
                        return;
                    }
                    
                    if (this.gameRunning) {
                        requestAnimationFrame(checkCollision);
                    }
                };
                
                setTimeout(checkCollision, 50);
                
                // –£–¥–∞–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
                setTimeout(() => {
                    if (object.parentNode) {
                        object.remove();
                    }
                }, 5000);
            }
            
            isColliding(rect1, rect2) {
                return rect1.left < rect2.right &&
                       rect1.right > rect2.left &&
                       rect1.top < rect2.bottom &&
                       rect1.bottom > rect2.top;
            }
            
            addScore(points = 10, isPumpkin = false) {
                this.score += points;
                this.updateScore();
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç—ã–∫–≤ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —É—Ä–æ–≤–Ω–µ–π
                if (isPumpkin) {
                    this.pumpkinsCaught++;
                    this.checkLevelUp();
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã
                if (this.score >= 666) {
                    this.victory();
                }
            }
            
            loseLife() {
                this.lives--;
                this.updateLives();
                
                if (this.lives <= 0) {
                    this.gameOver();
                }
            }
            
            updateScore() {
                this.scoreElement.textContent = `–°—á–µ—Ç: ${this.score}`;
            }
            
            updateLives() {
                this.livesElement.textContent = `–ñ–∏–∑–Ω–∏: ${this.lives}`;
            }
            
            checkLevelUp() {
                if (this.pumpkinsCaught >= this.pumpkinsForNextLevel) {
                    this.levelUp();
                }
                this.updateLevelDisplay();
            }
            
            levelUp() {
                this.playerLevel++;
                this.pumpkinsCaught = 0;
                this.playerSize += 0.05; // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –Ω–∞ 5%
                this.speedMultiplier += 0.05; // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –Ω–∞ 5%
                this.updatePlayerSize();
                this.updatePlayerSpeed();
            }
            
            updateLevelDisplay() {
                this.playerLevelElement.textContent = this.playerLevel;
                const progress = (this.pumpkinsCaught / this.pumpkinsForNextLevel) * 100;
                this.progressFill.style.width = progress + '%';
                this.progressText.textContent = `${this.pumpkinsCaught}/${this.pumpkinsForNextLevel}`;
            }
            
            updatePlayerSize() {
                this.player.style.transform = `scale(${this.playerSize})`;
            }
            
            updatePlayerSpeed() {
                this.maxSpeed = 10 * this.speedMultiplier;
                this.acceleration = 0.625 * this.speedMultiplier;
            }
            
            updatePlayerPosition() {
                this.player.style.left = this.playerX + 'px';
                this.player.style.transform = `scale(${this.playerSize}) translateX(0)`;
            }
            
            gameOver() {
                this.gameRunning = false;
                this.gameLoopRunning = false;
                clearInterval(this.spawnInterval);
                clearInterval(this.pumpkinCheckInterval);
                this.finalScoreElement.textContent = this.score;
                this.gameOverScreen.style.display = 'block';
                
                // –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤
                const objects = this.gameArea.querySelectorAll('.pumpkin, .ghost, .bonus, .debuff');
                objects.forEach(obj => obj.remove());
                this.activePumpkins = 0; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—ã–∫–≤
                
                // –°–±—Ä–æ—Å –¥–≤–∏–∂–µ–Ω–∏—è
                this.moveSpeed = 0;
                this.keys = {};
            }
            
            restart() {
                this.startGame();
            }
            
            togglePause() {
                if (!this.gameRunning) return;
                
                this.isPaused = !this.isPaused;
                
                if (this.isPaused) {
                    this.pauseScreen.style.display = 'block';
                    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–ø–∞–≤–Ω –æ–±—ä–µ–∫—Ç–æ–≤
                    clearInterval(this.spawnInterval);
                    clearInterval(this.pumpkinCheckInterval);
                    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏–∏ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤
                    this.pauseAllObjects();
                } else {
                    this.pauseScreen.style.display = 'none';
                    // –í–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏–∏ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤
                    this.resumeAllObjects();
                    // –í–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∞–≤–Ω –æ–±—ä–µ–∫—Ç–æ–≤
                    this.startSpawning();
                }
            }
            
            pauseAllObjects() {
                const objects = this.gameArea.querySelectorAll('.pumpkin, .ghost, .bonus, .debuff');
                objects.forEach(obj => {
                    obj.style.animationPlayState = 'paused';
                });
            }
            
            resumeAllObjects() {
                const objects = this.gameArea.querySelectorAll('.pumpkin, .ghost, .bonus, .debuff');
                objects.forEach(obj => {
                    obj.style.animationPlayState = 'running';
                });
            }
            
            victory() {
                this.gameRunning = false;
                this.gameLoopRunning = false;
                clearInterval(this.spawnInterval);
                clearInterval(this.pumpkinCheckInterval);
                this.victoryScreen.style.display = 'block';
                
                // –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤
                const objects = this.gameArea.querySelectorAll('.pumpkin, .ghost, .bonus, .debuff');
                objects.forEach(obj => obj.remove());
                this.activePumpkins = 0; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—ã–∫–≤
                
                // –°–±—Ä–æ—Å –¥–≤–∏–∂–µ–Ω–∏—è
                this.moveSpeed = 0;
                this.keys = {};
            }
            
            triggerScreamer() {
                if (this.screamerCount >= this.maxScreamers || this.screamerTriggered) return;
                
                this.screamerCount++;
                this.screamerTriggered = true;
                this.lastScreamerTime = Date.now();
                
                // –°–ª—É—á–∞–π–Ω—ã–π —Ç–∏–ø —Å–∫—Ä–∏–º–µ—Ä–∞
                const screamerType = Math.floor(Math.random() * 7);
                
                switch(screamerType) {
                    case 0: // –ß–µ—Ä–Ω—ã–π —ç–∫—Ä–∞–Ω
                        this.screamerOverlay.style.background = 'black';
                        this.screamerOverlay.style.display = 'block';
                        setTimeout(() => {
                            this.screamerOverlay.style.display = 'none';
                            this.screamerTriggered = false;
                        }, 1000);
                        break;
                        
                    case 1: // –ë–µ–ª—ã–π —ç–∫—Ä–∞–Ω
                        this.screamerOverlay.style.background = 'white';
                        this.screamerOverlay.style.display = 'block';
                        setTimeout(() => {
                            this.screamerOverlay.style.display = 'none';
                            this.screamerTriggered = false;
                        }, 1000);
                        break;
                        
                    case 2: // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
                        this.player.classList.add('player-screamer');
                        setTimeout(() => {
                            this.player.classList.remove('player-screamer');
                            this.screamerTriggered = false;
                        }, 1000);
                        break;
                        
                    case 3: // –°—Ç—Ä–∞—à–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞
                        this.screamerOverlay.style.background = 'black';
                        this.screamerOverlay.style.display = 'block';
                        this.screamerImage.style.display = 'block';
                        setTimeout(() => {
                            this.screamerOverlay.style.display = 'none';
                            this.screamerImage.style.display = 'none';
                            this.screamerTriggered = false;
                        }, 2000);
                        break;
                        
                    case 4: // –ö—Ä–∞—Å–Ω—ã–π —ç–∫—Ä–∞–Ω
                        this.screamerOverlay.style.background = 'red';
                        this.screamerOverlay.style.display = 'block';
                        setTimeout(() => {
                            this.screamerOverlay.style.display = 'none';
                            this.screamerTriggered = false;
                        }, 1000);
                        break;
                        
                    case 5: // –ó–µ–ª–µ–Ω—ã–π —ç–∫—Ä–∞–Ω
                        this.screamerOverlay.style.background = 'green';
                        this.screamerOverlay.style.display = 'block';
                        setTimeout(() => {
                            this.screamerOverlay.style.display = 'none';
                            this.screamerTriggered = false;
                        }, 1000);
                        break;
                        
                    case 6: // –°–∏–Ω–∏–π —ç–∫—Ä–∞–Ω
                        this.screamerOverlay.style.background = 'blue';
                        this.screamerOverlay.style.display = 'block';
                        setTimeout(() => {
                            this.screamerOverlay.style.display = 'none';
                            this.screamerTriggered = false;
                        }, 1000);
                        break;
                }
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        const game = new HalloweenGame();
        
        function startGame() {
            game.startGame();
        }
        
        function restartGame() {
            game.restart();
        }
        
        function closeGame() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∑–∞–∫—Ä—ã—Ç—å –∏–≥—Ä—É?')) {
                document.querySelector('.halloween-game-wrapper').style.display = 'none';
            }
        }
        
        function togglePause() {
            game.togglePause();
        }
        
        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Å–∫—Ä–æ–ª–ª–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏ –∏–≥—Ä–µ
        document.addEventListener('keydown', (e) => {
            if (['ArrowLeft', 'ArrowRight', 'a', 'A', 'd', 'D'].includes(e.key)) {
                e.preventDefault();
            }
        });
    </script>
</div>
